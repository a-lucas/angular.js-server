<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>angular.js-server</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script src="assets/js/modernizr.js"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">angular.js-server</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> angular.js-server</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<h1 id="angular-js-server-build-status-https-travis-ci-org-a-lucas-angular-js-server-svg-branch-master-https-travis-ci-org-a-lucas-angular-js-server-">Angular.JS-server  <a href="https://travis-ci.org/a-lucas/angular.js-server"><img src="https://travis-ci.org/a-lucas/angular.js-server.svg?branch=master" alt="Build Status"></a></h1>
				<h2 id="introduction">Introduction</h2>
				<!--Official site: https://a-lucas.github.io/angular.js-server/-->
				<p><a href="https://angularjs.org/" title="A super hero framework">Angular.js</a>  is a super heroic framework originally designed for web apps development. It usage has quickly expanded for hybrid mobile application development, with one mojo: one language to rule it all.</p>
				<p>The only missing piece is server-side rendering, which this package aims to fix. </p>
				<p>What does server side rendering means for angular?</p>
				<ul>
					<li>You don&#39;t have to modify your existing Angular.js code base.</li>
					<li>You can have big SEO benefits</li>
					<li>Your website will behave as a web application - which means a much richer UX.</li>
					<li>You get huge performances benefits by server side caching REST API and templateCache and replay them in your client instantly on page load</li>
					<li>You can start developiing your website with Angular, server side render it, and later port it into a mobile app with <a href="">cordova</a></li>
				</ul>
				<!--
[//]: # ##Comparing server prerendering with no prerendering

[//]: # ![MEAN.js HTML with Angular.js](screenshots/no-prerender.png)
[//]: # **MEAN.js HTML with Angular.js**

[//]: # ![MEAN.js HTML with Angular.js-server](screenshots/prerender.png)
[//]: # **MEAN.js HTML with Angular.js-server**

[//]: # You can check this out by yourself at this url: https://github.com/a-lucas/mean
-->
				<h2 id="how-does-it-works-">How does it works?</h2>
				<p>This library uses <a href="">JSDOM</a> to execute the angular app in a browser likre environment on the server, <a href="">simple-url-cache</a> to handle the url caching and <a href="">angular.js-server client library</a> to link this all together.</p>
				<p>To explain what is going on under the hood, let&#39;s use a todo case scenario and compare it with angular-server&#39;s flow.</p>
				<h2 id="usual-flow">Usual flow</h2>
				<ol>
					<li>The  browser request <code>/Todo</code></li>
					<li>The server receives the request and sends back the HTML ( which is almost empty )</li>
					<li>The client receives the HTML, loads all the JS scripts and then bootstrap angular</li>
					<li>Once bootstrapped ng-app sends a $http request back to the server to a todo list</li>
					<li>The server sends back a json list. we&#39;ll call it  <strong>json-time</strong></li>
					<li>Then angular displays the todo list on screen</li>
				</ol>
				<p><strong>At this stage, the HTML you have in the web inspector is what ng-server aims for.</strong>
				We&#39;ll call it <strong>GoalHTML</strong>.</p>
				<h2 id="angular-js-server-s-flow">Angular.js-server&#39;s flow</h2>
				<ol>
					<li>The browser request <code>/Todo</code></li>
					<li>The server receives and ask : <strong>Should <code>/Todo</code> be rendered ?</strong><ul>
							<li><em>(yes)</em><ul>
									<li><strong>Is Caching enabled?</strong><ul>
											<li><em>(yes)</em><ul>
													<li><strong>Is Todo already cached?</strong><ul>
															<li><em>(no)</em><ul>
																	<li>-&gt; pre-render on server the app and get <strong>GoalHTML</strong> ready to be sent</li>
																	<li>-&gt; cache the result for subsequent calls</li>
																	<li><strong>Is REST caching enabled?</strong><ul>
																			<li><em>(yes)</em><ul>
																					<li>-&gt; cache <strong>json-time</strong>  (including $templates)                                    </li>
																				</ul>
																			</li>
																		</ul>
																	</li>
																</ul>
															</li>
															<li><em>(yes)</em><ul>
																	<li>-&gt; Retrieve both <strong>GoalHTML</strong> and <strong>json-time</strong></li>
																</ul>
															</li>
														</ul>
													</li>
												</ul>
											</li>
											<li><em>(no)</em><ul>
													<li>pre-render on server the app and get <strong>GoalHTML</strong> ready to be sent            </li>
												</ul>
											</li>
										</ul>
									</li>
									<li>Sends back <strong>GoalHTML</strong> + <strong>json-time</strong> embeded for an instant replay on the client</li>
								</ul>
							</li>
							<li><em>(no)</em><ul>
									<li>-&gt; Return the vanilla HTML.</li>
								</ul>
							</li>
						</ul>
					</li>
				</ol>
				<blockquote>
					<blockquote>
						<p>Note: All logging and error handling have been skipped for padding purposes</p>
					</blockquote>
				</blockquote>
				<h2 id="getting-started">Getting started</h2>
				<p>Choose what you want to pre-render and what you want to cache</p>
				<pre><code>`<span class="javascript"></span>``<span class="javascript">javascript
vae ngServer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'angular.js-server'</span>);
<span class="hljs-keyword">var</span> server = <span class="hljs-keyword">new</span> ngServer();
<span class="hljs-comment">//by default, rendering is off, and caching off</span>
server.config.render.setDefault(<span class="hljs-string">'include'</span>); <span class="hljs-comment">//never, include, exclude</span>
server.config.render.addRule(<span class="hljs-regexp">/^index\.html$/</span>);

app.get(<span class="hljs-string">'/index.html'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>{
    <span class="hljs-keyword">var</span> html = fs.readFileSYnc(..., <span class="hljs-string">'utf-8'</span>);
    server.render(html, req.url).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>{
        res.send(response.html);
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{
        <span class="hljs-comment">// if any error, send the original html</span>
        res.send(response.html);
    });
}


</span>``<span class="javascript"></span>`
</code></pre><h2 id="config">Config</h2>
				<p>The config options are quite extensive, you can get the complete api in the doc folder.</p>
				<h2 id="status-string-error-codes">Status string &amp; error codes</h2>
				<ul>
					<li>RENDERED: <code>0</code></li>
					<li>RENDER_EXCLUDED: <code>1</code></li>
					<li>ALREADY_CACHED: <code>2</code></li>
					<li>SERVER_TIMEOUT: <code>3</code></li>
					<li>ERROR_HANDLER: <code>4</code></li>
					<li>SERVER_ERROR: <code>5</code></li>
				</ul>
				<h2 id="dependencies">Dependencies</h2>
				<p>This library depends on a compatible version of <a href="https://github.com/a-lucas/angular.js-server-bower" title="Angular.js-server">Angular.js-server client</a></p>
				<p><a href="https://travis-ci.org/a-lucas/angular.js-server-bower"><img src="https://travis-ci.org/a-lucas/angular.js-server-bower.svg?branch=master" alt="Build Status"></a>   <a href="https://codecov.io/gh/a-lucas/angular.js-server-bower"><img src="https://codecov.io/gh/a-lucas/angular.js-server-bower/branch/master/graph/badge.svg" alt="codecov"></a></p>
				<h2 id="requirements">Requirements</h2>
				<p><strong>html5mode</strong></p>
				<p>Your angular app must use <a href="">html5mode</a>. The reason behind this requirement is that browsers don&#39;t send the hashbang fragment to the server.</p>
				<p><strong>Angular.js 1.5.x</strong></p>
				<p>This has been written with 1.5.x in mind.</p>
				<p><strong>node.js</strong></p>
				<p>The only known way to integrate node with popular server side technologies as (PHP, Perl, ASP, whatever) is to summon node.js child processes to do the work. </p>
				<h2 id="functionalities">Functionalities</h2>
				<p><strong>Web page caching</strong></p>
				<p>It is possible to cache the files on the file system, or in a <a href="">Redis</a> datastore. If you need to use another storage engine, it is easy to extend <a href="">simple-url-cache</a> package to meet your needs.</p>
				<p><strong>REST $http caching &amp; angular template pre-caching</strong></p>
				<p>When pre-rendered, every templateRequest and REST call can be optionally cached and injected into the client before the angular app bootstraps. These requests are instantly replayed, decreasing considerably the client page loading time.</p>
				<p><strong>URL filtering</strong></p>
				<p>You can decide which URLs will be pre-rendered, and uses either of the two strategies <code>include</code> or <code>exclude</code> by providing an array of Regexes to match URL against.</p>
				<p><strong>Logging</strong> </p>
				<p>The $log provider is augmented to access the file system when rendered on the server. It becomes then possible to log anything your web-app does on the server file system.</p>
				<h2 id="installation">Installation</h2>
				<h3 id="client-side-library">Client Side library</h3>
				<p>You can install <a href="">it</a> vith bower. </p>
				<pre><code><span class="hljs-keyword">bower </span><span class="hljs-keyword">install </span>angular.<span class="hljs-keyword">js-server</span>
</code></pre><p>For those without bower, this is <a href="https://github.com/a-lucas/angular.js-server-bower/tree/master/dist">where the file is</a></p>
				<p>Then you need to include the module <code>server</code> as a dependency in your AngularJS application.</p>
				<h3 id="server-module-installation">Server module installation</h3>
				<pre><code>npm <span class="hljs-keyword">install</span> angular.js-<span class="hljs-keyword">server</span>
</code></pre><p>#WIP</p>
				<p>This work is incomplete and totally in progress - DON&#39;T use it on prod withouth prior testing.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class="label tsd-is-external">
						<span>Internals</span>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_angularserverrenderer_.html">"<wbr>Angular<wbr>Server<wbr>Renderer"</a>
					</li>
					<li class="label tsd-is-external">
						<span>Externals</span>
					</li>
					<li class=" tsd-kind-external-module tsd-is-external">
						<a href="modules/_engineconfig_.html">"<wbr>Engine<wbr>Config"</a>
					</li>
					<li class=" tsd-kind-external-module tsd-is-external">
						<a href="modules/_helpers_.html">"<wbr>Helpers"</a>
					</li>
					<li class=" tsd-kind-external-module tsd-is-external">
						<a href="modules/_responseformater_.html">"<wbr>Response<wbr>Formater"</a>
					</li>
					<li class=" tsd-kind-external-module tsd-is-external">
						<a href="modules/_config_cache_.html">"config/cache"</a>
					</li>
					<li class=" tsd-kind-external-module tsd-is-external">
						<a href="modules/_config_log_.html">"config/log"</a>
					</li>
					<li class=" tsd-kind-external-module tsd-is-external">
						<a href="modules/_config_render_.html">"config/render"</a>
					</li>
					<li class=" tsd-kind-external-module tsd-is-external">
						<a href="modules/_config_server_.html">"config/server"</a>
					</li>
					<li class=" tsd-kind-external-module tsd-is-external">
						<a href="modules/_interfaces_.html">"interfaces"</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.io" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>